{"version":3,"sources":["memoize.ts"],"names":[],"mappings":";;;IAMA,IAAM,YAAY,GAAG,EAAE,CAAC;IACxB,IAAM,WAAW,GAAG,EAAE,CAAC;IAEvB,uBAAuB,GAAQ;QAC7B,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACT,MAAM,CAAC,YAAY,CAAC;QACtB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC;YACnC,MAAM,CAAC,GAAG,CAAC;QACb,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAC7B,WAAW,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;QACxB,CAAC;QAED,MAAM,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;IAC1B,CAAC;IAED,iBAA0E,EAAK;QAC7E,IAAI,KAAU,CAAC;QAEf,kDAAkD;QAClD,MAAM,CAAC;YAA0B,cAAc;iBAAd,UAAc,EAAd,qBAAc,EAAd,IAAc;gBAAd,yBAAc;;YAC7C,IAAI,MAAgB,CAAC;YAErB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;gBACtB,EAAE,CAAC,CAAC,KAAK,KAAK,SAAS,CAAC,CAAC,CAAC;oBACxB,KAAK,GAAG,EAAE,eAAI,IAAI,CAAC,CAAC;gBACtB,CAAC;gBACD,MAAM,GAAG,KAAK,CAAC;YACjB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;oBACX,KAAK,GAAG,IAAI,OAAO,EAAE,CAAC;gBACxB,CAAC;gBAED,IAAI,YAAY,GAAQ,KAAK,CAAC;gBAE9B,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;oBACzC,IAAI,GAAG,GAAG,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;oBAEjC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;wBACT,GAAG,GAAG,YAAY,CAAC;oBACrB,CAAC;oBACD,EAAE,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;wBACnB,YAAY,GAAG,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;oBAChC,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACN,YAAY,GAAG,IAAI,OAAO,EAAE,CAAC;wBAC7B,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,YAAY,CAAC,CAAC;oBAC/B,CAAC;gBACH,CAAC;gBAED,IAAI,OAAO,GAAG,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBAEnD,EAAE,CAAC,CAAC,YAAY,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;oBAC9B,MAAM,GAAG,YAAY,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;gBACrC,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,IAAI,KAAK,GAAG,EAAE,eAAI,IAAI,CAAC,CAAC;oBACxB,YAAY,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;oBACjC,MAAM,GAAG,KAAK,CAAC;gBACjB,CAAC;YACH,CAAC;YAED,MAAM,CAAC,MAAM,CAAC;QAChB,CAAQ,CAAC;IACX,CAAC;IA9CD,0BA8CC","file":"memoize.js","sourcesContent":["declare class WeakMap {\r\n  public get(key: any): any;\r\n  public set(key: any, value: any): void;\r\n  public has(key: any);\r\n}\r\n\r\nconst _emptyObject = {};\r\nconst _dictionary = {};\r\n\r\nfunction _normalizeArg(val: any) {\r\n  if (!val) {\r\n    return _emptyObject;\r\n  } else if (typeof val === 'object') {\r\n    return val;\r\n  } else if (!_dictionary[val]) {\r\n    _dictionary[val] = {};\r\n  }\r\n\r\n  return _dictionary[val];\r\n}\r\n\r\nexport function memoize<T extends (...args: any[]) => RET_TYPE, RET_TYPE>(cb: T): T {\r\n  let cache: any;\r\n\r\n  // tslint:disable-next-line:no-function-expression\r\n  return function memoizedFunction(...args: any[]): RET_TYPE {\r\n    let retVal: RET_TYPE;\r\n\r\n    if (args.length === 0) {\r\n      if (cache === undefined) {\r\n        cache = cb(...args);\r\n      }\r\n      retVal = cache;\r\n    } else {\r\n      if (!cache) {\r\n        cache = new WeakMap();\r\n      }\r\n\r\n      let currentCache: any = cache;\r\n\r\n      for (let i = 0; i < args.length - 1; i++) {\r\n        let arg = _normalizeArg(args[i]);\r\n\r\n        if (!arg) {\r\n          arg = _emptyObject;\r\n        }\r\n        if (cache.has(arg)) {\r\n          currentCache = cache.get(arg);\r\n        } else {\r\n          currentCache = new WeakMap();\r\n          cache.set(arg, currentCache);\r\n        }\r\n      }\r\n\r\n      let lastArg = _normalizeArg(args[args.length - 1]);\r\n\r\n      if (currentCache.has(lastArg)) {\r\n        retVal = currentCache.get(lastArg);\r\n      } else {\r\n        let value = cb(...args);\r\n        currentCache.set(lastArg, value);\r\n        retVal = value;\r\n      }\r\n    }\r\n\r\n    return retVal;\r\n  } as any;\r\n}\r\n"],"sourceRoot":"..\\src"}